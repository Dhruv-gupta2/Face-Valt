<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FaceVault - AI Face Recognition System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        :root {
            --bg-dark: #0a0e17;
            --bg-card: #141824;
            --bg-card-hover: #1a1f2e;
            --accent-cyan: #00d9ff;
            --accent-pink: #ff006e;
            --accent-purple: #8b5cf6;
            --accent-green: #00ffa3;
            --text-primary: #ffffff;
            --text-secondary: #a0a8c0;
            --border: #2a3144;
            --glow-cyan: rgba(0, 217, 255, 0.3);
            --glow-pink: rgba(255, 0, 110, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'IBM Plex Sans', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
        }

        /* Animated background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
        }

        .bg-gradient {
            position: absolute;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.15;
            animation: float 20s infinite;
        }

        .bg-gradient:nth-child(1) {
            width: 500px;
            height: 500px;
            background: var(--accent-cyan);
            top: -200px;
            left: -200px;
            animation-delay: 0s;
        }

        .bg-gradient:nth-child(2) {
            width: 400px;
            height: 400px;
            background: var(--accent-pink);
            top: 50%;
            right: -150px;
            animation-delay: -7s;
        }

        .bg-gradient:nth-child(3) {
            width: 600px;
            height: 600px;
            background: var(--accent-purple);
            bottom: -250px;
            left: 30%;
            animation-delay: -14s;
        }

        @keyframes float {
            0%, 100% {
                transform: translate(0, 0) scale(1);
            }
            33% {
                transform: translate(50px, -50px) scale(1.1);
            }
            66% {
                transform: translate(-30px, 30px) scale(0.9);
            }
        }

        .app-container {
            position: relative;
            z-index: 1;
            min-height: 100vh;
            padding: 2rem;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 4rem;
            animation: slideDown 0.8s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 3.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--accent-cyan) 0%, var(--accent-pink) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            letter-spacing: -2px;
            text-shadow: 0 0 30px var(--glow-cyan);
        }

        .tagline {
            font-size: 1.1rem;
            color: var(--text-secondary);
            font-weight: 300;
            letter-spacing: 2px;
        }

        /* Stats Bar */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-bottom: 3rem;
            animation: fadeIn 1s ease-out 0.3s both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent-cyan);
            text-shadow: 0 0 20px var(--glow-cyan);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 0.25rem;
        }

        /* Main Content */
        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            animation: fadeIn 1s ease-out 0.5s both;
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 2.5rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-pink));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover {
            background: var(--bg-card-hover);
            border-color: var(--accent-cyan);
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(0, 217, 255, 0.2);
        }

        .card:hover::before {
            opacity: 1;
        }

        .card-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
        }

        .card-full {
            grid-column: 1 / -1;
        }

        /* Upload Section */
        .upload-zone {
            border: 2px dashed var(--border);
            border-radius: 16px;
            padding: 3rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            background: rgba(0, 217, 255, 0.02);
        }

        .upload-zone:hover {
            border-color: var(--accent-cyan);
            background: rgba(0, 217, 255, 0.05);
            box-shadow: 0 0 30px var(--glow-cyan);
        }

        .upload-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .upload-text {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .upload-hint {
            font-size: 0.9rem;
            color: var(--text-secondary);
            opacity: 0.7;
        }

        .preview-container {
            margin-top: 1.5rem;
            position: relative;
        }

        .preview-image {
            max-width: 100%;
            max-height: 400px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .recognition-box {
            position: absolute;
            border: 3px solid var(--accent-green);
            box-shadow: 0 0 20px var(--accent-green);
            border-radius: 8px;
            pointer-events: none;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.6;
            }
        }

        .recognition-label {
            position: absolute;
            background: var(--accent-green);
            color: var(--bg-dark);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.9rem;
            bottom: -40px;
            left: 0;
            white-space: nowrap;
        }

        /* Input */
        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-label {
            display: block;
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .input-field {
            width: 100%;
            padding: 1rem;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            font-family: 'IBM Plex Sans', sans-serif;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: 0 0 20px var(--glow-cyan);
        }

        /* Buttons */
        .button {
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            font-family: 'IBM Plex Sans', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .button-primary {
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-pink));
            color: var(--text-primary);
            box-shadow: 0 4px 20px rgba(0, 217, 255, 0.3);
        }

        .button-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 30px rgba(0, 217, 255, 0.5);
        }

        .button-secondary {
            background: var(--bg-dark);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .button-secondary:hover {
            border-color: var(--accent-cyan);
            box-shadow: 0 0 20px var(--glow-cyan);
        }

        .button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        /* Results */
        .result-card {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .result-name {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--accent-cyan);
            margin-bottom: 0.5rem;
        }

        .result-confidence {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .confidence-bar {
            width: 100%;
            height: 6px;
            background: var(--bg-card);
            border-radius: 3px;
            margin-top: 0.5rem;
            overflow: hidden;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-green));
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        /* Face List */
        .face-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .face-item {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .face-item:hover {
            border-color: var(--accent-cyan);
            transform: translateY(-3px);
            box-shadow: 0 5px 20px var(--glow-cyan);
        }

        .face-name {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .face-date {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .delete-btn {
            margin-top: 0.75rem;
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid var(--accent-pink);
            color: var(--accent-pink);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .delete-btn:hover {
            background: var(--accent-pink);
            color: var(--bg-dark);
        }

        /* Status Messages */
        .status-message {
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            font-weight: 500;
            animation: slideIn 0.5s ease-out;
        }

        .status-success {
            background: rgba(0, 255, 163, 0.1);
            border: 1px solid var(--accent-green);
            color: var(--accent-green);
        }

        .status-error {
            background: rgba(255, 0, 110, 0.1);
            border: 1px solid var(--accent-pink);
            color: var(--accent-pink);
        }

        /* Loading Spinner */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-cyan);
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Responsive */
        @media (max-width: 968px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .logo {
                font-size: 2.5rem;
            }

            .stats-bar {
                flex-direction: column;
                gap: 1.5rem;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="bg-animation">
        <div class="bg-gradient"></div>
        <div class="bg-gradient"></div>
        <div class="bg-gradient"></div>
    </div>
    
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const API_URL = 'http://localhost:5000/api';

        function App() {
            const [stats, setStats] = useState({ total_faces: 0 });
            const [registerName, setRegisterName] = useState('');
            const [registerImage, setRegisterImage] = useState(null);
            const [registerPreview, setRegisterPreview] = useState(null);
            const [recognizeImage, setRecognizeImage] = useState(null);
            const [recognizePreview, setRecognizePreview] = useState(null);
            const [recognitionResults, setRecognitionResults] = useState([]);
            const [faceList, setFaceList] = useState([]);
            const [loading, setLoading] = useState(false);
            const [statusMessage, setStatusMessage] = useState({ text: '', type: '' });
            const registerInputRef = useRef(null);
            const recognizeInputRef = useRef(null);

            useEffect(() => {
                fetchStats();
                fetchFaces();
            }, []);

            const fetchStats = async () => {
                try {
                    const response = await fetch(`${API_URL}/stats`);
                    const data = await response.json();
                    if (data.success) {
                        setStats({ total_faces: data.total_faces });
                    }
                } catch (error) {
                    console.error('Error fetching stats:', error);
                }
            };

            const fetchFaces = async () => {
                try {
                    const response = await fetch(`${API_URL}/faces`);
                    const data = await response.json();
                    if (data.success) {
                        setFaceList(data.faces);
                    }
                } catch (error) {
                    console.error('Error fetching faces:', error);
                }
            };

            const handleRegisterImageSelect = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        setRegisterImage(reader.result);
                        setRegisterPreview(reader.result);
                    };
                    reader.readAsDataURL(file);
                }
            };

            const handleRecognizeImageSelect = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        setRecognizeImage(reader.result);
                        setRecognizePreview(reader.result);
                    };
                    reader.readAsDataURL(file);
                }
            };

            const handleRegister = async () => {
                if (!registerName || !registerImage) {
                    showStatus('Please provide both name and image', 'error');
                    return;
                }

                setLoading(true);
                try {
                    const response = await fetch(`${API_URL}/register`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ name: registerName, image: registerImage })
                    });

                    const data = await response.json();
                    
                    if (data.success) {
                        showStatus(`Successfully registered ${data.name}!`, 'success');
                        setRegisterName('');
                        setRegisterImage(null);
                        setRegisterPreview(null);
                        fetchStats();
                        fetchFaces();
                    } else {
                        showStatus(data.error || 'Registration failed', 'error');
                    }
                } catch (error) {
                    showStatus('Error connecting to server', 'error');
                } finally {
                    setLoading(false);
                }
            };

            const handleRecognize = async () => {
                if (!recognizeImage) {
                    showStatus('Please select an image to recognize', 'error');
                    return;
                }

                setLoading(true);
                setRecognitionResults([]);
                try {
                    const response = await fetch(`${API_URL}/recognize`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ image: recognizeImage })
                    });

                    const data = await response.json();
                    
                    if (data.success) {
                        setRecognitionResults(data.faces);
                        showStatus(`Found ${data.count} face(s)`, 'success');
                    } else {
                        showStatus(data.error || 'Recognition failed', 'error');
                    }
                } catch (error) {
                    showStatus('Error connecting to server', 'error');
                } finally {
                    setLoading(false);
                }
            };

            const handleDelete = async (faceId) => {
                if (!confirm('Are you sure you want to delete this face?')) return;

                try {
                    const response = await fetch(`${API_URL}/faces/${faceId}`, {
                        method: 'DELETE'
                    });

                    const data = await response.json();
                    
                    if (data.success) {
                        showStatus('Face deleted successfully', 'success');
                        fetchStats();
                        fetchFaces();
                    } else {
                        showStatus(data.error || 'Delete failed', 'error');
                    }
                } catch (error) {
                    showStatus('Error connecting to server', 'error');
                }
            };

            const showStatus = (text, type) => {
                setStatusMessage({ text, type });
                setTimeout(() => setStatusMessage({ text: '', type: '' }), 5000);
            };

            return (
                <div className="app-container">
                    <header className="header">
                        <h1 className="logo">FACEVAULT</h1>
                        <p className="tagline">AI-POWERED FACE RECOGNITION SYSTEM</p>
                    </header>

                    <div className="stats-bar">
                        <div className="stat-item">
                            <div className="stat-number">{stats.total_faces}</div>
                            <div className="stat-label">Registered Faces</div>
                        </div>
                        <div className="stat-item">
                            <div className="stat-number">{recognitionResults.length}</div>
                            <div className="stat-label">Detected Faces</div>
                        </div>
                    </div>

                    <div className="main-content">
                        {/* Register Section */}
                        <div className="card">
                            <h2 className="card-title">üì∏ Register Face</h2>
                            
                            {statusMessage.text && statusMessage.type === 'success' && (
                                <div className="status-message status-success">
                                    {statusMessage.text}
                                </div>
                            )}
                            
                            <div className="input-group">
                                <label className="input-label">Name</label>
                                <input
                                    type="text"
                                    className="input-field"
                                    placeholder="Enter person's name"
                                    value={registerName}
                                    onChange={(e) => setRegisterName(e.target.value)}
                                />
                            </div>

                            <div
                                className="upload-zone"
                                onClick={() => registerInputRef.current?.click()}
                            >
                                <div className="upload-icon">üì∑</div>
                                <div className="upload-text">Click to upload image</div>
                                <div className="upload-hint">PNG, JPG up to 10MB</div>
                                <input
                                    ref={registerInputRef}
                                    type="file"
                                    accept="image/*"
                                    onChange={handleRegisterImageSelect}
                                    style={{ display: 'none' }}
                                />
                            </div>

                            {registerPreview && (
                                <div className="preview-container">
                                    <img src={registerPreview} alt="Preview" className="preview-image" />
                                </div>
                            )}

                            <div className="button-group">
                                <button
                                    className="button button-primary"
                                    onClick={handleRegister}
                                    disabled={loading}
                                >
                                    Register Face {loading && <span className="loading-spinner"></span>}
                                </button>
                                <button
                                    className="button button-secondary"
                                    onClick={() => {
                                        setRegisterName('');
                                        setRegisterImage(null);
                                        setRegisterPreview(null);
                                    }}
                                >
                                    Clear
                                </button>
                            </div>
                        </div>

                        {/* Recognize Section */}
                        <div className="card">
                            <h2 className="card-title">üîç Recognize Face</h2>
                            
                            {statusMessage.text && statusMessage.type === 'error' && (
                                <div className="status-message status-error">
                                    {statusMessage.text}
                                </div>
                            )}

                            <div
                                className="upload-zone"
                                onClick={() => recognizeInputRef.current?.click()}
                            >
                                <div className="upload-icon">üéØ</div>
                                <div className="upload-text">Click to upload image</div>
                                <div className="upload-hint">Upload a photo to identify</div>
                                <input
                                    ref={recognizeInputRef}
                                    type="file"
                                    accept="image/*"
                                    onChange={handleRecognizeImageSelect}
                                    style={{ display: 'none' }}
                                />
                            </div>

                            {recognizePreview && (
                                <div className="preview-container" style={{ position: 'relative' }}>
                                    <img 
                                        src={recognizePreview} 
                                        alt="Preview" 
                                        className="preview-image"
                                        id="recognize-img"
                                    />
                                    {recognitionResults.map((face, index) => (
                                        <div key={index}>
                                            <div
                                                className="recognition-box"
                                                style={{
                                                    top: `${face.location.top}px`,
                                                    left: `${face.location.left}px`,
                                                    width: `${face.location.right - face.location.left}px`,
                                                    height: `${face.location.bottom - face.location.top}px`
                                                }}
                                            >
                                                <div className="recognition-label">
                                                    {face.name} ({face.confidence}%)
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}

                            <div className="button-group">
                                <button
                                    className="button button-primary"
                                    onClick={handleRecognize}
                                    disabled={loading}
                                >
                                    Recognize {loading && <span className="loading-spinner"></span>}
                                </button>
                                <button
                                    className="button button-secondary"
                                    onClick={() => {
                                        setRecognizeImage(null);
                                        setRecognizePreview(null);
                                        setRecognitionResults([]);
                                    }}
                                >
                                    Clear
                                </button>
                            </div>

                            {recognitionResults.length > 0 && (
                                <div style={{ marginTop: '2rem' }}>
                                    <h3 style={{ marginBottom: '1rem', color: 'var(--text-secondary)' }}>
                                        Recognition Results
                                    </h3>
                                    {recognitionResults.map((face, index) => (
                                        <div key={index} className="result-card">
                                            <div className="result-name">
                                                {face.name === 'Unknown' ? '‚ùì Unknown Person' : `‚úì ${face.name}`}
                                            </div>
                                            <div className="result-confidence">
                                                Confidence: {face.confidence}%
                                            </div>
                                            <div className="confidence-bar">
                                                <div
                                                    className="confidence-fill"
                                                    style={{ width: `${face.confidence}%` }}
                                                ></div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>

                        {/* Registered Faces Section */}
                        <div className="card card-full">
                            <h2 className="card-title">üë• Registered Faces</h2>
                            
                            {faceList.length === 0 ? (
                                <div style={{ textAlign: 'center', padding: '3rem', color: 'var(--text-secondary)' }}>
                                    No faces registered yet. Register your first face above!
                                </div>
                            ) : (
                                <div className="face-grid">
                                    {faceList.map((face) => (
                                        <div key={face.id} className="face-item">
                                            <div className="face-name">{face.name}</div>
                                            <div className="face-date">
                                                {new Date(face.created_at).toLocaleDateString()}
                                            </div>
                                            <button
                                                className="delete-btn"
                                                onClick={() => handleDelete(face.id)}
                                            >
                                                Delete
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

// Fotter 











    </script>
</body>
</html>
